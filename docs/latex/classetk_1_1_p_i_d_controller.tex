\hypertarget{classetk_1_1_p_i_d_controller}{\section{etk\-:\-:P\-I\-D\-Controller Class Reference}
\label{classetk_1_1_p_i_d_controller}\index{etk\-::\-P\-I\-D\-Controller@{etk\-::\-P\-I\-D\-Controller}}
}


A generic \hyperlink{classetk_1_1_p_i_d_controller}{P\-I\-D\-Controller}. \href{https://en.wikipedia.org/wiki/PID_controller}{\tt https\-://en.\-wikipedia.\-org/wiki/\-P\-I\-D\-\_\-controller}.  




{\ttfamily \#include $<$pid.\-h$>$}

Inheritance diagram for etk\-:\-:P\-I\-D\-Controller\-:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.000000cm]{classetk_1_1_p_i_d_controller}
\end{center}
\end{figure}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classetk_1_1_p_i_d_controller_ae0b3ccadf13c06f32429a769ef816351}{P\-I\-D\-Controller} ()
\item 
float \hyperlink{classetk_1_1_p_i_d_controller_abb92773f41ad5b1650653417f91e0528}{step} (float error, float dt)
\begin{DoxyCompactList}\small\item\em Perform an interation of the P\-I\-D controller by supplying your own error value. \end{DoxyCompactList}\item 
float \hyperlink{classetk_1_1_p_i_d_controller_a9877d3e02bc8935b568f778e683b8633}{step} (float setpoint, float measurement, float dt)
\begin{DoxyCompactList}\small\item\em Perform an interation of the P\-I\-D controller using a setpoint and measurement to calculate the error. \end{DoxyCompactList}\item 
void \hyperlink{classetk_1_1_p_i_d_controller_a9a38573051513d5615fc3c553e307c3f}{set\-\_\-kp} (float kp)
\begin{DoxyCompactList}\small\item\em Sets the proportional gain of the controller. \end{DoxyCompactList}\item 
void \hyperlink{classetk_1_1_p_i_d_controller_a3a76b07f655128e9a45dce2297c6ad8c}{set\-\_\-ki} (float ki)
\begin{DoxyCompactList}\small\item\em Sets the integral gain of the controller. W\-A\-R\-N\-I\-N\-G\-: changing the integral gain can result in unstable behaviour -\/ similar to integral windup. This could be fixed by mapping the old integral and Ki to the new Ki. T\-O\-D\-O. \end{DoxyCompactList}\item 
void \hyperlink{classetk_1_1_p_i_d_controller_a69337b2053e22fe3de8ecdcc93169579}{set\-\_\-kd} (float kd)
\begin{DoxyCompactList}\small\item\em Sets the derivative gain. \end{DoxyCompactList}\item 
float \hyperlink{classetk_1_1_p_i_d_controller_aac7e4d36115040c886e246c9d12ae162}{get\-\_\-kp} ()
\item 
float \hyperlink{classetk_1_1_p_i_d_controller_a8fe8587acf149580d35b30d2b83755c2}{get\-\_\-ki} ()
\item 
float \hyperlink{classetk_1_1_p_i_d_controller_a48e86408c7eb812974312161cea797a0}{get\-\_\-kd} ()
\item 
void \hyperlink{classetk_1_1_p_i_d_controller_a02af725f99fb1e0131674f7602fd635e}{reset\-\_\-integral} ()
\begin{DoxyCompactList}\small\item\em Sets the integral to zero. \end{DoxyCompactList}\item 
void \hyperlink{classetk_1_1_p_i_d_controller_a803cdc7e6e9a2cf9f6216380bbc2c524}{set\-\_\-max\-\_\-integral} (float imax)
\begin{DoxyCompactList}\small\item\em Sets a maximum size for the integral. This can help prevent integral wind up. \end{DoxyCompactList}\item 
void \hyperlink{classetk_1_1_p_i_d_controller_a3b1f378dc6c1b235c70df6703c9d293d}{set\-\_\-derivative\-\_\-filter\-\_\-gain} (float g)
\begin{DoxyCompactList}\small\item\em Sets the derivative filter gain. The derivative filter is an \hyperlink{classetk_1_1_expo_moving_avg}{Expo\-Moving\-Avg} filter. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Protected Attributes}
\begin{DoxyCompactItemize}
\item 
float \hyperlink{classetk_1_1_p_i_d_controller_a3aed53bb90e1600d440e236ab0d6f4b9}{integral}
\item 
float \hyperlink{classetk_1_1_p_i_d_controller_ad6c1bf5a48b506990dfc8fbf47010a5c}{Kp}
\item 
float \hyperlink{classetk_1_1_p_i_d_controller_a36cff2f631d3efb194f3e392927cb543}{Ki}
\item 
float \hyperlink{classetk_1_1_p_i_d_controller_a36051f342bbadb57693b941e4eb9e353}{Kd}
\item 
float \hyperlink{classetk_1_1_p_i_d_controller_a33d2b8813eea388174ca01d4fd7ec148}{integral\-\_\-constraint}
\item 
\hyperlink{classetk_1_1_expo_moving_avg}{etk\-::\-Expo\-Moving\-Avg} \hyperlink{classetk_1_1_p_i_d_controller_a73e3b7bc002861712facbb017bfe6e6d}{der\-\_\-filter}
\item 
float \hyperlink{classetk_1_1_p_i_d_controller_a6798422061ebe557fc4a48bf7da41dff}{previous\-\_\-error}
\end{DoxyCompactItemize}


\subsection{Detailed Description}
A generic \hyperlink{classetk_1_1_p_i_d_controller}{P\-I\-D\-Controller}. \href{https://en.wikipedia.org/wiki/PID_controller}{\tt https\-://en.\-wikipedia.\-org/wiki/\-P\-I\-D\-\_\-controller}. 

\subsection{Constructor \& Destructor Documentation}
\hypertarget{classetk_1_1_p_i_d_controller_ae0b3ccadf13c06f32429a769ef816351}{\index{etk\-::\-P\-I\-D\-Controller@{etk\-::\-P\-I\-D\-Controller}!P\-I\-D\-Controller@{P\-I\-D\-Controller}}
\index{P\-I\-D\-Controller@{P\-I\-D\-Controller}!etk::PIDController@{etk\-::\-P\-I\-D\-Controller}}
\subsubsection[{P\-I\-D\-Controller}]{\setlength{\rightskip}{0pt plus 5cm}etk\-::\-P\-I\-D\-Controller\-::\-P\-I\-D\-Controller (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}}\label{classetk_1_1_p_i_d_controller_ae0b3ccadf13c06f32429a769ef816351}


\subsection{Member Function Documentation}
\hypertarget{classetk_1_1_p_i_d_controller_a48e86408c7eb812974312161cea797a0}{\index{etk\-::\-P\-I\-D\-Controller@{etk\-::\-P\-I\-D\-Controller}!get\-\_\-kd@{get\-\_\-kd}}
\index{get\-\_\-kd@{get\-\_\-kd}!etk::PIDController@{etk\-::\-P\-I\-D\-Controller}}
\subsubsection[{get\-\_\-kd}]{\setlength{\rightskip}{0pt plus 5cm}float etk\-::\-P\-I\-D\-Controller\-::get\-\_\-kd (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classetk_1_1_p_i_d_controller_a48e86408c7eb812974312161cea797a0}
\hypertarget{classetk_1_1_p_i_d_controller_a8fe8587acf149580d35b30d2b83755c2}{\index{etk\-::\-P\-I\-D\-Controller@{etk\-::\-P\-I\-D\-Controller}!get\-\_\-ki@{get\-\_\-ki}}
\index{get\-\_\-ki@{get\-\_\-ki}!etk::PIDController@{etk\-::\-P\-I\-D\-Controller}}
\subsubsection[{get\-\_\-ki}]{\setlength{\rightskip}{0pt plus 5cm}float etk\-::\-P\-I\-D\-Controller\-::get\-\_\-ki (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classetk_1_1_p_i_d_controller_a8fe8587acf149580d35b30d2b83755c2}
\hypertarget{classetk_1_1_p_i_d_controller_aac7e4d36115040c886e246c9d12ae162}{\index{etk\-::\-P\-I\-D\-Controller@{etk\-::\-P\-I\-D\-Controller}!get\-\_\-kp@{get\-\_\-kp}}
\index{get\-\_\-kp@{get\-\_\-kp}!etk::PIDController@{etk\-::\-P\-I\-D\-Controller}}
\subsubsection[{get\-\_\-kp}]{\setlength{\rightskip}{0pt plus 5cm}float etk\-::\-P\-I\-D\-Controller\-::get\-\_\-kp (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classetk_1_1_p_i_d_controller_aac7e4d36115040c886e246c9d12ae162}
\hypertarget{classetk_1_1_p_i_d_controller_a02af725f99fb1e0131674f7602fd635e}{\index{etk\-::\-P\-I\-D\-Controller@{etk\-::\-P\-I\-D\-Controller}!reset\-\_\-integral@{reset\-\_\-integral}}
\index{reset\-\_\-integral@{reset\-\_\-integral}!etk::PIDController@{etk\-::\-P\-I\-D\-Controller}}
\subsubsection[{reset\-\_\-integral}]{\setlength{\rightskip}{0pt plus 5cm}void etk\-::\-P\-I\-D\-Controller\-::reset\-\_\-integral (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classetk_1_1_p_i_d_controller_a02af725f99fb1e0131674f7602fd635e}


Sets the integral to zero. 

\hypertarget{classetk_1_1_p_i_d_controller_a3b1f378dc6c1b235c70df6703c9d293d}{\index{etk\-::\-P\-I\-D\-Controller@{etk\-::\-P\-I\-D\-Controller}!set\-\_\-derivative\-\_\-filter\-\_\-gain@{set\-\_\-derivative\-\_\-filter\-\_\-gain}}
\index{set\-\_\-derivative\-\_\-filter\-\_\-gain@{set\-\_\-derivative\-\_\-filter\-\_\-gain}!etk::PIDController@{etk\-::\-P\-I\-D\-Controller}}
\subsubsection[{set\-\_\-derivative\-\_\-filter\-\_\-gain}]{\setlength{\rightskip}{0pt plus 5cm}void etk\-::\-P\-I\-D\-Controller\-::set\-\_\-derivative\-\_\-filter\-\_\-gain (
\begin{DoxyParamCaption}
\item[{float}]{g}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classetk_1_1_p_i_d_controller_a3b1f378dc6c1b235c70df6703c9d293d}


Sets the derivative filter gain. The derivative filter is an \hyperlink{classetk_1_1_expo_moving_avg}{Expo\-Moving\-Avg} filter. 

\hypertarget{classetk_1_1_p_i_d_controller_a69337b2053e22fe3de8ecdcc93169579}{\index{etk\-::\-P\-I\-D\-Controller@{etk\-::\-P\-I\-D\-Controller}!set\-\_\-kd@{set\-\_\-kd}}
\index{set\-\_\-kd@{set\-\_\-kd}!etk::PIDController@{etk\-::\-P\-I\-D\-Controller}}
\subsubsection[{set\-\_\-kd}]{\setlength{\rightskip}{0pt plus 5cm}void etk\-::\-P\-I\-D\-Controller\-::set\-\_\-kd (
\begin{DoxyParamCaption}
\item[{float}]{kd}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classetk_1_1_p_i_d_controller_a69337b2053e22fe3de8ecdcc93169579}


Sets the derivative gain. 

\hypertarget{classetk_1_1_p_i_d_controller_a3a76b07f655128e9a45dce2297c6ad8c}{\index{etk\-::\-P\-I\-D\-Controller@{etk\-::\-P\-I\-D\-Controller}!set\-\_\-ki@{set\-\_\-ki}}
\index{set\-\_\-ki@{set\-\_\-ki}!etk::PIDController@{etk\-::\-P\-I\-D\-Controller}}
\subsubsection[{set\-\_\-ki}]{\setlength{\rightskip}{0pt plus 5cm}void etk\-::\-P\-I\-D\-Controller\-::set\-\_\-ki (
\begin{DoxyParamCaption}
\item[{float}]{ki}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classetk_1_1_p_i_d_controller_a3a76b07f655128e9a45dce2297c6ad8c}


Sets the integral gain of the controller. W\-A\-R\-N\-I\-N\-G\-: changing the integral gain can result in unstable behaviour -\/ similar to integral windup. This could be fixed by mapping the old integral and Ki to the new Ki. T\-O\-D\-O. 

\hypertarget{classetk_1_1_p_i_d_controller_a9a38573051513d5615fc3c553e307c3f}{\index{etk\-::\-P\-I\-D\-Controller@{etk\-::\-P\-I\-D\-Controller}!set\-\_\-kp@{set\-\_\-kp}}
\index{set\-\_\-kp@{set\-\_\-kp}!etk::PIDController@{etk\-::\-P\-I\-D\-Controller}}
\subsubsection[{set\-\_\-kp}]{\setlength{\rightskip}{0pt plus 5cm}void etk\-::\-P\-I\-D\-Controller\-::set\-\_\-kp (
\begin{DoxyParamCaption}
\item[{float}]{kp}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classetk_1_1_p_i_d_controller_a9a38573051513d5615fc3c553e307c3f}


Sets the proportional gain of the controller. 

\hypertarget{classetk_1_1_p_i_d_controller_a803cdc7e6e9a2cf9f6216380bbc2c524}{\index{etk\-::\-P\-I\-D\-Controller@{etk\-::\-P\-I\-D\-Controller}!set\-\_\-max\-\_\-integral@{set\-\_\-max\-\_\-integral}}
\index{set\-\_\-max\-\_\-integral@{set\-\_\-max\-\_\-integral}!etk::PIDController@{etk\-::\-P\-I\-D\-Controller}}
\subsubsection[{set\-\_\-max\-\_\-integral}]{\setlength{\rightskip}{0pt plus 5cm}void etk\-::\-P\-I\-D\-Controller\-::set\-\_\-max\-\_\-integral (
\begin{DoxyParamCaption}
\item[{float}]{imax}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classetk_1_1_p_i_d_controller_a803cdc7e6e9a2cf9f6216380bbc2c524}


Sets a maximum size for the integral. This can help prevent integral wind up. 

\hypertarget{classetk_1_1_p_i_d_controller_abb92773f41ad5b1650653417f91e0528}{\index{etk\-::\-P\-I\-D\-Controller@{etk\-::\-P\-I\-D\-Controller}!step@{step}}
\index{step@{step}!etk::PIDController@{etk\-::\-P\-I\-D\-Controller}}
\subsubsection[{step}]{\setlength{\rightskip}{0pt plus 5cm}float etk\-::\-P\-I\-D\-Controller\-::step (
\begin{DoxyParamCaption}
\item[{float}]{error, }
\item[{float}]{dt}
\end{DoxyParamCaption}
)}}\label{classetk_1_1_p_i_d_controller_abb92773f41ad5b1650653417f91e0528}


Perform an interation of the P\-I\-D controller by supplying your own error value. 

\begin{DoxyItemize}
\item error Some pre-\/calculated error value. \item dt \hyperlink{classetk_1_1_time}{Time} period since the last iteration. \begin{DoxyReturn}{Returns}
Control output. 
\end{DoxyReturn}
\end{DoxyItemize}
\hypertarget{classetk_1_1_p_i_d_controller_a9877d3e02bc8935b568f778e683b8633}{\index{etk\-::\-P\-I\-D\-Controller@{etk\-::\-P\-I\-D\-Controller}!step@{step}}
\index{step@{step}!etk::PIDController@{etk\-::\-P\-I\-D\-Controller}}
\subsubsection[{step}]{\setlength{\rightskip}{0pt plus 5cm}float etk\-::\-P\-I\-D\-Controller\-::step (
\begin{DoxyParamCaption}
\item[{float}]{setpoint, }
\item[{float}]{measurement, }
\item[{float}]{dt}
\end{DoxyParamCaption}
)}}\label{classetk_1_1_p_i_d_controller_a9877d3e02bc8935b568f778e683b8633}


Perform an interation of the P\-I\-D controller using a setpoint and measurement to calculate the error. 

\begin{DoxyItemize}
\item setpoint The setpoint \item measurement The measurement \item dt \hyperlink{classetk_1_1_time}{Time} period since the last iteration. \begin{DoxyReturn}{Returns}
Control output. 
\end{DoxyReturn}
\end{DoxyItemize}


\subsection{Member Data Documentation}
\hypertarget{classetk_1_1_p_i_d_controller_a73e3b7bc002861712facbb017bfe6e6d}{\index{etk\-::\-P\-I\-D\-Controller@{etk\-::\-P\-I\-D\-Controller}!der\-\_\-filter@{der\-\_\-filter}}
\index{der\-\_\-filter@{der\-\_\-filter}!etk::PIDController@{etk\-::\-P\-I\-D\-Controller}}
\subsubsection[{der\-\_\-filter}]{\setlength{\rightskip}{0pt plus 5cm}{\bf etk\-::\-Expo\-Moving\-Avg} etk\-::\-P\-I\-D\-Controller\-::der\-\_\-filter\hspace{0.3cm}{\ttfamily [protected]}}}\label{classetk_1_1_p_i_d_controller_a73e3b7bc002861712facbb017bfe6e6d}
\hypertarget{classetk_1_1_p_i_d_controller_a3aed53bb90e1600d440e236ab0d6f4b9}{\index{etk\-::\-P\-I\-D\-Controller@{etk\-::\-P\-I\-D\-Controller}!integral@{integral}}
\index{integral@{integral}!etk::PIDController@{etk\-::\-P\-I\-D\-Controller}}
\subsubsection[{integral}]{\setlength{\rightskip}{0pt plus 5cm}float etk\-::\-P\-I\-D\-Controller\-::integral\hspace{0.3cm}{\ttfamily [protected]}}}\label{classetk_1_1_p_i_d_controller_a3aed53bb90e1600d440e236ab0d6f4b9}
\hypertarget{classetk_1_1_p_i_d_controller_a33d2b8813eea388174ca01d4fd7ec148}{\index{etk\-::\-P\-I\-D\-Controller@{etk\-::\-P\-I\-D\-Controller}!integral\-\_\-constraint@{integral\-\_\-constraint}}
\index{integral\-\_\-constraint@{integral\-\_\-constraint}!etk::PIDController@{etk\-::\-P\-I\-D\-Controller}}
\subsubsection[{integral\-\_\-constraint}]{\setlength{\rightskip}{0pt plus 5cm}float etk\-::\-P\-I\-D\-Controller\-::integral\-\_\-constraint\hspace{0.3cm}{\ttfamily [protected]}}}\label{classetk_1_1_p_i_d_controller_a33d2b8813eea388174ca01d4fd7ec148}
\hypertarget{classetk_1_1_p_i_d_controller_a36051f342bbadb57693b941e4eb9e353}{\index{etk\-::\-P\-I\-D\-Controller@{etk\-::\-P\-I\-D\-Controller}!Kd@{Kd}}
\index{Kd@{Kd}!etk::PIDController@{etk\-::\-P\-I\-D\-Controller}}
\subsubsection[{Kd}]{\setlength{\rightskip}{0pt plus 5cm}float etk\-::\-P\-I\-D\-Controller\-::\-Kd\hspace{0.3cm}{\ttfamily [protected]}}}\label{classetk_1_1_p_i_d_controller_a36051f342bbadb57693b941e4eb9e353}
\hypertarget{classetk_1_1_p_i_d_controller_a36cff2f631d3efb194f3e392927cb543}{\index{etk\-::\-P\-I\-D\-Controller@{etk\-::\-P\-I\-D\-Controller}!Ki@{Ki}}
\index{Ki@{Ki}!etk::PIDController@{etk\-::\-P\-I\-D\-Controller}}
\subsubsection[{Ki}]{\setlength{\rightskip}{0pt plus 5cm}float etk\-::\-P\-I\-D\-Controller\-::\-Ki\hspace{0.3cm}{\ttfamily [protected]}}}\label{classetk_1_1_p_i_d_controller_a36cff2f631d3efb194f3e392927cb543}
\hypertarget{classetk_1_1_p_i_d_controller_ad6c1bf5a48b506990dfc8fbf47010a5c}{\index{etk\-::\-P\-I\-D\-Controller@{etk\-::\-P\-I\-D\-Controller}!Kp@{Kp}}
\index{Kp@{Kp}!etk::PIDController@{etk\-::\-P\-I\-D\-Controller}}
\subsubsection[{Kp}]{\setlength{\rightskip}{0pt plus 5cm}float etk\-::\-P\-I\-D\-Controller\-::\-Kp\hspace{0.3cm}{\ttfamily [protected]}}}\label{classetk_1_1_p_i_d_controller_ad6c1bf5a48b506990dfc8fbf47010a5c}
\hypertarget{classetk_1_1_p_i_d_controller_a6798422061ebe557fc4a48bf7da41dff}{\index{etk\-::\-P\-I\-D\-Controller@{etk\-::\-P\-I\-D\-Controller}!previous\-\_\-error@{previous\-\_\-error}}
\index{previous\-\_\-error@{previous\-\_\-error}!etk::PIDController@{etk\-::\-P\-I\-D\-Controller}}
\subsubsection[{previous\-\_\-error}]{\setlength{\rightskip}{0pt plus 5cm}float etk\-::\-P\-I\-D\-Controller\-::previous\-\_\-error\hspace{0.3cm}{\ttfamily [protected]}}}\label{classetk_1_1_p_i_d_controller_a6798422061ebe557fc4a48bf7da41dff}


The documentation for this class was generated from the following file\-:\begin{DoxyCompactItemize}
\item 
inc/etk/\hyperlink{pid_8h}{pid.\-h}\end{DoxyCompactItemize}
